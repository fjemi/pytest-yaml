globals:
  resources:
  - ${ROOT_DIR}/assertions/app.py


tests:
- function: add_numbers
  description: Returns the result of adding two numbers
  tests:
  - &ADD_NUMBERS_TESTS
    arguments:
      a: 1
      b: 2
    assertions:
    - method: equals
      expected: 3
    - method: type
      expected:
      - int
      - float
- function: add_dataclass
  description: Returns a dataclass containing two numbers and the result
    of adding the numbers
  tests:
  - &ADD_DATACLASS_TESTS
    arguments:
      data:
        a: 1
        b: 2
    cast_arguments:
    - field: data
      caster: Data
      unpack: true
    cast_output:
    - caster: dc.asdict
    assertions:
    - method: equals
      field: result
      expected: 3
    - method: type
      expected:
      - dict
- function: main
  description: >
    Returns the results of adding two integers
  tests:
  - tests:
    - description: Trying to add string and integer should yield a 'TypeError'
      arguments:
        a: 1
        b: TypeError
      assertions:
      - method: catch
        expected: TypeError
    - << *ADD_NUMBERS_TESTS
    - << *ADD_DATACLASS_TESTS
